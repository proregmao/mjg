# ç™»å½•æ¥å£ä¿®å¤è¯´æ˜

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. åˆ›å»ºè®¤è¯APIæ¨¡å—
- æ–‡ä»¶ï¼š`/data/mjg/backend/app/api/auth.py`
- å®ç°äº†ä»¥ä¸‹æ¥å£ï¼š
  - `POST /login` - ç”¨æˆ·ç™»å½•
  - `POST /userInfo` - è·å–ç”¨æˆ·ä¿¡æ¯
  - `POST /logout` - é€€å‡ºç™»å½•
  - `POST /register` - ç”¨æˆ·æ³¨å†Œ

### 2. ç®€åŒ–è®¤è¯é€»è¾‘
ç”±äºè¿™æ˜¯å†…éƒ¨ä½¿ç”¨çš„éº»å°†é¦†è®°è´¦ç³»ç»Ÿï¼Œé‡‡ç”¨äº†ç®€åŒ–çš„è®¤è¯æ–¹å¼ï¼š
- **ä»»æ„ç”¨æˆ·åå’Œå¯†ç éƒ½å¯ä»¥ç™»å½•**
- ç™»å½•åè¿”å›ä¸€ä¸ªtoken
- è·å–ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œå¦‚æœæœ‰æœ‰æ•ˆtokenåˆ™è¿”å›å¯¹åº”ç”¨æˆ·ä¿¡æ¯ï¼Œå¦åˆ™è¿”å›é»˜è®¤ç®¡ç†å‘˜ä¿¡æ¯

### 3. è·¯ç”±æ³¨å†Œ
å·²åœ¨ `app/main.py` ä¸­æ³¨å†Œè®¤è¯è·¯ç”±ï¼Œå¹¶ä¸”æ”¾åœ¨å…¶ä»–è·¯ç”±ä¹‹å‰ï¼Œç¡®ä¿ä¼˜å…ˆçº§ã€‚

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### ç™»å½•
```bash
POST http://localhost:8001/login
Content-Type: application/json

{
  "username": "admin",
  "password": "ä»»æ„å¯†ç "
}
```

å“åº”ï¼š
```json
{
  "accessToken": "ç”Ÿæˆçš„token",
  "username": "admin"
}
```

### è·å–ç”¨æˆ·ä¿¡æ¯
```bash
POST http://localhost:8001/userInfo
Content-Type: application/json

{
  "accessToken": "ç™»å½•æ—¶è¿”å›çš„token"
}
```

å“åº”ï¼š
```json
{
  "username": "admin",
  "avatar": null,
  "permissions": ["admin"]
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **éœ€è¦é‡å¯åç«¯æœåŠ¡**ï¼šä¿®æ”¹äº†åç«¯ä»£ç åï¼Œéœ€è¦é‡å¯åç«¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ
2. **ç®€åŒ–è®¤è¯**ï¼šå½“å‰ç‰ˆæœ¬æ˜¯ç®€åŒ–è®¤è¯ï¼Œç”Ÿäº§ç¯å¢ƒåº”è¯¥å®ç°çœŸæ­£çš„ç”¨æˆ·è®¤è¯
3. **Tokenå­˜å‚¨**ï¼šå½“å‰ä½¿ç”¨å†…å­˜å­˜å‚¨tokenï¼Œé‡å¯æœåŠ¡åtokenä¼šå¤±æ•ˆ

## ğŸš€ ä¸‹ä¸€æ­¥

é‡å¯åç«¯æœåŠ¡åï¼Œå‰ç«¯ç™»å½•åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚

```bash
cd /data/mjg/backend
source venv/bin/activate
uvicorn app.main:app --host 0.0.0.0 --port 8001 --reload
```

æˆ–è€…ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š
```bash
cd /data/mjg
./start.sh restart
```
















