# 路由参数问题修复说明

## 问题描述
访问客户详情页面时，路由参数 `id` 的值是字符串 `:id` 而不是实际的客户ID，导致API调用失败。

## 问题原因
1. 路由是通过 `router.addRoute()` 动态添加的（在 `asyncRoutes` 中定义）
2. 路由参数在某些情况下没有被正确解析
3. 可能是路由注册时机的问题

## 修复方案

### 1. 改进路径提取逻辑
在 `detail.vue` 中，添加了从多种路径格式中提取ID的逻辑：
- 支持 `/customer/detail/123`
- 支持 `#/customer/detail/123`（hash模式）
- 支持 `/detail/123`
- 支持 `#/detail/123`

### 2. 添加详细的路由信息日志
输出路由的完整信息，包括：
- path
- params
- query
- fullPath
- matched routes

### 3. 改进错误处理
- 如果无法提取ID，显示友好的错误提示
- 自动跳转回客户列表页面

## 修复的文件
1. `/data/mjg/vue3-admin-better/src/views/customer/detail.vue` - 改进路径提取逻辑

## 测试建议
1. 从客户列表点击"查看"按钮，应该能正确跳转到详情页
2. 检查浏览器控制台，查看路由信息日志
3. 如果仍然有问题，查看日志中的路径信息，确认路径格式

## 注意事项
- 路由是通过动态添加的，确保路由已经正确注册
- 如果路由参数仍然是 `:id`，会尝试从路径中提取
- 如果无法提取，会自动跳转回客户列表















